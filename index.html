<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>XP Simulation</title>
<style>
html,body{margin:0;height:100%;overflow:hidden;font-family:sans-serif;background:#000;}
#intro,#dialogue,#boot,#progressStage,#bootVid,#desktop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;color:#0f0;font-size:20px;text-align:center;}
#intro{display:flex;flex-direction:column;}
#progressStage{background:#000;color:#0f0;}
#bootVid,#desktop{inset:0;}
#bootVid{object-fit:cover;width:100%;height:100%;}
#desktop{background:url("bliss.png") center/cover no-repeat;cursor:url("cursor.cur"),auto;}

/* taskbar */
.taskbar{
  position:absolute;bottom:0;left:0;width:100%;height:40px;
  background:linear-gradient(#3d7ade,#1b47a6);
  display:flex;align-items:center;justify-content:space-between;
  color:#fff;padding:0 10px;box-shadow:0 -2px 6px rgba(0,0,0,.5);
}
.start{background:linear-gradient(#50a050,#2d7c2d);
  border:1px solid #164d16;border-radius:4px;padding:4px 12px;
  font-weight:bold;color:#fff;text-shadow:0 1px 0 #000;cursor:pointer;
  transition:filter .15s;
}
.start:hover{filter:brightness(1.2);}
.clock{font-size:14px;}
.icon{position:absolute;width:80px;text-align:center;color:#fff;font-size:12px;user-select:none;text-shadow:1px 1px 2px #000;}
.icon img{width:48px;height:48px;display:block;margin:0 auto 4px;}
.balloon{
  position:absolute;bottom:60px;right:20px;width:220px;
  background:#fff;border:1px solid #555;border-radius:5px;
  font-size:13px;padding:8px;display:none;box-shadow:0 0 6px rgba(0,0,0,.4);
}
.window{
  position:absolute;top:120px;left:120px;width:320px;
  background:#e0e0e0;border:2px solid #0a246a;display:none;
  box-shadow:3px 3px 6px rgba(0,0,0,.5);
}
.titlebar{
  background:linear-gradient(#4c7cd2,#2453a6);
  color:#fff;padding:4px;font-size:14px;cursor:move;
  display:flex;justify-content:space-between;align-items:center;
}
.btns span{display:inline-block;width:16px;height:16px;text-align:center;
  margin-left:3px;font-weight:bold;cursor:pointer;
}
.min{background:#eee;color:#000;}
.close{background:#c33;color:#fff;}
.content{padding:10px;font-size:14px;color:#000;}
</style>
</head>
<body>

<!-- intro -->
<div id="intro">
  <p>Initializing system...</p>
  <p>Loading modules...</p>
  <p>Press ENTER to continue</p>
</div>

<!-- dialogue -->
<div id="dialogue">Running boot diagnostics...</div>

<!-- Linux boot simulation -->
<div id="boot">Booting Linux kernel...<br>System check complete.<br>Press ENTER to continue</div>

<!-- progress stage -->
<div id="progressStage">Loading... please wait</div>

<!-- XP boot video -->
<video id="bootVid" src="lol.mp4"></video>

<!-- XP desktop -->
<div id="desktop">
  <div class="icon" style="top:40px;left:40px;"><img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f5a5.svg"><div>My Computer</div></div>
  <div class="icon" style="top:140px;left:40px;"><img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f5c4.svg"><div>My Documents</div></div>
  <div class="icon" style="top:240px;left:40px;"><img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/267b.svg"><div>Recycle Bin</div></div>
  <div class="icon" style="top:340px;left:40px;"><img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f310.svg"><div>Internet</div></div>

  <div class="balloon" id="balloon">New hardware found.</div>

  <div class="window" id="errWin">
    <div class="titlebar">
      <span>Error</span>
      <div class="btns"><span class="min">_</span><span class="close">X</span></div>
    </div>
    <div class="content">
      A problem has been detected.<br><br>
      <button onclick="closeErr()">OK</button>
    </div>
  </div>

  <div class="taskbar">
    <div class="start">Start</div>
    <div class="clock" id="clock"></div>
  </div>
</div>

<audio id="sndStart" src="start.mp3" preload="auto"></audio>
<audio id="sndErr" src="error.mp3" preload="auto"></audio>

<script>
const intro=document.getElementById("intro");
const dialogue=document.getElementById("dialogue");
const boot=document.getElementById("boot");
const progressStage=document.getElementById("progressStage");
const bootVid=document.getElementById("bootVid");
const desktop=document.getElementById("desktop");

function showDialogue(){
  intro.style.display="none";
  dialogue.style.display="flex";
  setTimeout(()=>{dialogue.style.display="none";boot.style.display="flex";},3000);
}
document.addEventListener("keydown",function handler(e){
  if(e.key==="Enter" && intro.style.display==="flex"){showDialogue();}
  else if(e.key==="Enter" && boot.style.display==="flex"){
    document.removeEventListener("keydown",handler);
    boot.style.display="none";
    showXPBoot();
  }
});

function showXPBoot(){
  bootVid.style.display="block";
  bootVid.play();
}
bootVid.addEventListener("ended",()=>{
  bootVid.style.display="none";
  document.getElementById("sndStart").play();
  desktop.style.display="block";
  updateClock();
  showBalloon();
});
/* clock */
function updateClock(){
  const c=document.getElementById("clock");
  const d=new Date();
  let h=d.getHours(),m=d.getMinutes();
  const ampm=h>=12?"PM":"AM";h=h%12||12;
  c.textContent=`${h}:${m.toString().padStart(2,"0")} ${ampm}`;
  setTimeout(updateClock,1000);
}
/* balloon */
function showBalloon(){
  const b=document.getElementById("balloon");
  b.style.display="block";
  setTimeout(()=>b.style.display="none",6000);
  b.onclick=()=>{b.style.display="none";openErr();}
}
/* error window */
function openErr(){
  const w=document.getElementById("errWin");
  w.style.display="block";
  document.getElementById("sndErr").play();
}
function closeErr(){
  document.getElementById("errWin").style.display="none";
}
/* drag window */
const win=document.getElementById("errWin");
const bar=win.querySelector(".titlebar");
let drag=false,dx=0,dy=0;
bar.addEventListener("mousedown",e=>{drag=true;dx=e.offsetX;dy=e.offsetY;});
window.addEventListener("mouseup",()=>drag=false);
window.addEventListener("mousemove",e=>{
  if(!drag)return;
  win.style.left=(e.pageX-dx)+"px";
  win.style.top=(e.pageY-dy)+"px";
});
win.querySelector(".close").onclick=()=>win.style.display="none";
win.querySelector(".min").onclick=()=>win.style.display="none";
</script>
</body>
</html>
