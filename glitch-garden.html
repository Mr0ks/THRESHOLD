<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Glitch Garden</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(#0e0f1a, #0a0d12);
    color: #eaf3ff;
    font-family: system-ui, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 { margin: 12px; }
  #garden {
    border: 2px solid #2a375a;
    border-radius: 12px;
    background: #0b0e16;
    width: 90vw;
    height: 60vh;
    max-width: 900px;
    max-height: 500px;
    cursor: crosshair;
  }
  .controls {
    margin: 10px;
    display: flex;
    gap: 10px;
  }
  button {
    padding: 8px 12px;
    background: #111a2d;
    color: white;
    border: 1px solid #2a375a;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover { background: #162034; }
  #stats { margin: 10px; }
</style>
</head>
<body>
  <h1>ðŸŒ± Glitch Garden</h1>
  <canvas id="garden"></canvas>
  <div class="controls">
    <button onclick="plantSeed()">Plant Seed</button>
    <button onclick="waterAll()">Water All</button>
    <button onclick="resetGarden()">Reset</button>
  </div>
  <div id="stats">Plants: 0 | Waterings: 0 | Weirdness: 0%</div>

<script>
const canvas = document.getElementById("garden");
const ctx = canvas.getContext("2d");
resizeCanvas();

let plants = [];
let waterings = 0;
let weirdness = 0;

// resize canvas when window size changes
window.addEventListener("resize", resizeCanvas);
function resizeCanvas() {
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
}

// clicking plants a seed at that location
canvas.addEventListener("click", (e) => {
  const rect = canvas.getBoundingClientRect();
  plantSeed(e.clientX - rect.left, e.clientY - rect.top);
});

// add a new seed
function plantSeed(x=Math.random()*canvas.width, y=canvas.height-20) {
  plants.push({x,y,height:20,hue:120});
  updateStats();
}

// water all plants â†’ they grow & weirdness rises
function waterAll() {
  waterings++;
  plants.forEach(p => {
    p.height += 10 + Math.random()*10;
    p.hue += Math.random()*40 - 20;
  });
  weirdness = Math.min(100, weirdness + 5 + Math.random()*10);
  updateStats();
}

// reset the garden
function resetGarden() {
  plants = [];
  waterings = 0;
  weirdness = 0;
  document.body.style.filter = "none";
  updateStats();
}

// update the stats HUD
function updateStats() {
  document.getElementById("stats").textContent =
    `Plants: ${plants.length} | Waterings: ${waterings} | Weirdness: ${Math.round(weirdness)}%`;
}

// draw loop
function draw() {
  ctx.fillStyle = "#0b0e16";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // draw plants
  plants.forEach(p => {
    ctx.strokeStyle = `hsl(${p.hue}, 60%, 50%)`;
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(p.x,p.y);
    ctx.lineTo(p.x,p.y - p.height);
    ctx.stroke();

    ctx.fillStyle = `hsl(${p.hue+60},80%,60%)`;
    ctx.beginPath();
    ctx.arc(p.x, p.y - p.height, 8, 0, Math.PI*2);
    ctx.fill();
  });

  // glitch effects
  if (weirdness > 0) {
    ctx.globalAlpha = weirdness/100 * 0.3;
    ctx.fillStyle = "magenta";
    for (let i=0;i<weirdness/5;i++) {
      let x = Math.random()*canvas.width;
      let y = Math.random()*canvas.height;
      ctx.fillRect(x,y,4,2);
    }
    ctx.globalAlpha = 1;
    document.body.style.filter =
      `hue-rotate(${weirdness*3}deg) contrast(${1+weirdness/200})`;
  }

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
